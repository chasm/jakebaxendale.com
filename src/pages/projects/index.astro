---
import type { AstroInstance } from "astro"
import type { PageMeta } from "~types"

import Article from "~components/Article/index.astro"
import Layout from "~layouts/index.astro"

const pages = (await Astro.glob("../projects/**/*.astro")) as Array<
	AstroInstance & { metadata: PageMeta }
>

export const metadata: Partial<PageMeta> = {
	title: "Projects",
}

const { title } = metadata
---

<Layout {title}>
	<Article {title}>
		<p>TODO: Brief intro here?</p>
		<dl>
			{
				pages.map(({ metadata: { blurb, title } = {}, url: href }) => (
					<>
						<dt>
							<a {href}>{title}</a>
						</dt>
						<dd>{blurb}</dd>
					</>
				))
			}
		</dl>
	</Article>
</Layout>
